{"version":3,"sources":["state/user-state.js","state/majiba-state.js","components/welcome.js","components/accueil.js","components/theme.js","commons/keycloak-config.js","commons/axios-auth.js","commons/get-majiba-uri.js","commons/get-majiba-apps.js","components/majiba.icon.js","components/app-bar.js","components/waiting.js","components/refresh-token/notification.js","components/refresh-token/confirm.js","components/refresh-token/prefix-tools.js","components/refresh-token/suggester.js","components/refresh-token/token.js","components/refresh-token/formulaire.js","components/majiba-apps/majiba-apps.js","components/application.js","index.js"],"names":["userState","atom","key","default","token","undefined","authenticated","givenName","majibaState","Welcome","useRecoilState","Typography","variant","Accueil","theme","createMuiTheme","palette","primary","main","purple","secondary","amber","makeStyles","formulaire","padding","margin","button","keycloak","keyCloak","window","location","origin","create","instance","axios","interceptors","request","use","config","headers","Authorization","Accept","authorizeConfig","getMajibaUri","process","gitlabUri","accessToken","resourceName","appKind","tomcat","batch","js","buildAppList","rows","tmp","reduce","apps","row","i","split","name","modules","kind","env","ad","length","Object","values","a","uri","fetch","method","response","json","lines","console","log","getMajibaApps","Icon","width","height","xmlns","version","viewBox","transform","cx","cy","r","fill","fillOpacity","stroke","strokeDasharray","strokeMiterlimit","strokeOpacity","strokeWidth","opacity","d","rx","ry","strokeLinecap","strokeLinejoin","useStyles","menuButton","marginRight","spacing","title","flexGrow","ButtonAppBar","classes","useState","menu","setMenu","onLoginCallback","useCallback","logout","redirectUri","login","pathname","AppBar","position","Toolbar","IconButton","edge","className","color","aria-label","onClick","Button","Drawer","anchor","open","onClose","ListItem","component","Link","to","ListItemIcon","ListItemText","Waiting","status","classnames","CircularProgress","Notification","Alert","severity","Confirm","onConfirm","onCancel","Dialog","aria-labelledby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","preparePrefix","prefix","removeAccents","toLowerCase","replace","Item","label","focused","MenuItem","e","stopPropagation","selected","SuggestionMenu","items","Paper","elevation","MenuList","map","Suggester","list","onChange","onSubmit","suggestions","setSuggestions","setFocused","setPrefix","onChangeCallback","target","value","onClickCallback","useEffect","prepared","startsWith","indexOf","sort","b","getSuggestions","onKeyDown","Math","min","max","TextField","Token","FormControl","fullWidth","InputLabel","htmlFor","OutlinedInput","type","disabled","endAdornment","InputAdornment","writeText","isEnabled","PleaseLogin","Formulaire","confirm","setConfirm","setName","wait","setWait","setStatus","majibaToken","setMajibaToken","useRecoilValue","onChangeName","onMenuSubmit","n","createUri","axiosWithAuth","get","then","data","catch","noValidate","autoComplete","style","fontSize","onSelect","Modules","display","setDisplay","Menu","anchorEl","size","ContentCell","cell","useRef","ref","current","MajibaApps","tableData","setTableData","setApps","refresh","header","path","__width","resizable","entries","o","index","__height","prepare","headerHeight","cellRenderer","Application","user","setUserState","useSetRecoilState","init","setInit","success","is","tokenParsed","given_name","error","ThemeProvider","CssBaseline","Container","role","fixed","exact","RefreshToken","ReactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.7eb5200e.chunk.js","sourcesContent":["import { atom } from \"recoil\";\n\nconst userState = atom({\n  key: \"user-state\",\n  default: { token: undefined, authenticated: false, givenName: undefined },\n});\n\nexport default userState;\n","import { atom } from \"recoil\";\n\nconst majibaState = atom({\n  key: \"majiba-state\",\n  default: undefined,\n});\n\nexport default majibaState;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { useRecoilState } from \"recoil\";\nimport { userState } from \"../state\";\n\nfunction Welcome() {\n  const [{ givenName }] = useRecoilState(userState);\n  if (givenName) {\n    return <Typography variant=\"h3\">{`Bienvenue ${givenName}`}</Typography>;\n  }\n  return <Typography variant=\"h3\">{`Vous n'êtes pas authentifié.`}</Typography>;\n}\n\nexport default Welcome;\n","import React from \"react\";\nimport Welcome from \"./welcome\";\n\nfunction Accueil() {\n  return <Welcome />;\n}\n\nexport default Accueil;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport amber from \"@material-ui/core/colors/amber\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: purple[500],\n    },\n    secondary: {\n      main: amber[500],\n    },\n  },\n});\n\nexport const useStyles = makeStyles((theme) => ({\n  formulaire: { padding: \"10px 24px\", margin: \"10px 30px\" },\n  button: { padding: \"6px\" },\n}));\n\nexport default theme;\n","import keyCloak from \"keycloak-js\";\n\nconst keycloak = keyCloak(\n  `${window.location.origin}/majiba-ui/keycloak-qf.json`\n);\n\nexport default keycloak;\n","import axios from \"axios\";\n\nconst authorizeConfig = (token) => (config) => {\n  return {\n    ...config,\n    headers: { Authorization: `Bearer ${token}` },\n    \"Content-Type\": \"application/json;charset=utf-8\",\n    Accept: \"application/json;charset=utf-8\",\n  };\n};\n\nfunction create(token) {\n  const instance = axios.create();\n  instance.interceptors.request.use(function (config) {\n    return authorizeConfig(token)(config);\n  });\n\n  return instance;\n}\n\nexport default create;\n","function getMajibaUri() {\n  return process.env.NODE_ENV === \"production\"\n    ? process.env.REACT_APP_MAJIBA_PROD\n    : process.env.REACT_APP_MAJIBA_DV;\n}\n\nexport default getMajibaUri;\n","const gitlabUri = process.env.REACT_APP_GITLAB_URI;\nconst accessToken = process.env.REACT_APP_GITLAB_TOKEN;\nconst resourceName = \"liste_majibav2groupe.csv\";\n\n// application;module;majtomcat;majbatch;majjavascript;environnement;groupead\n\nfunction appKind(tomcat, batch, js) {\n  if (tomcat === \"1\") {\n    return \"application/tomcat\";\n  }\n  if (batch === \"1\") {\n    return \"application/batch\";\n  }\n  if (js === \"1\") {\n    return \"application/javascript\";\n  }\n  return \"application/unknow\";\n}\n\n// function buildAppList(rows = []) {\n//   return rows.reduce(function (apps, row, i) {\n//     if (i > 0) {\n//       const tmp = row.split(\";\");\n\n//       return [\n//         ...apps,\n//         {\n//           name: tmp[0],\n//           module: tmp[1],\n//           kind: appKind(tmp[2], tmp[3], tmp[4]),\n//           env: tmp[5],\n//           ad: tmp[6],\n//         },\n//       ];\n//     }\n//     return [];\n//   }, []);\n// }\n\nfunction buildAppList(rows = []) {\n  const tmp = rows.reduce(function (apps, row, i) {\n    if (i > 0) {\n      const tmp = row.split(\";\");\n      const name = tmp[0];\n      if (name in apps) {\n        return {\n          ...apps,\n          [name]: {\n            name,\n            modules: [...apps[name].modules, tmp[1]],\n            kind: appKind(tmp[2], tmp[3], tmp[4]),\n            env: tmp[5],\n            ad: tmp[6],\n          },\n        };\n      }\n      return {\n        ...apps,\n        [name]: {\n          name,\n          modules: tmp[1].length ? [tmp[1]] : [],\n          kind: appKind(tmp[2], tmp[3], tmp[4]),\n          env: tmp[5],\n          ad: tmp[6],\n        },\n      };\n    }\n    return apps;\n  }, {});\n  return Object.values(tmp);\n}\n\nasync function getMajibaApps() {\n  const uri = `/api/v4/projects/834/repository/files/${resourceName}/blame?ref=master`;\n  try {\n    const response = await fetch(`${gitlabUri}${uri}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/text\",\n        \"PRIVATE-TOKEN\": accessToken,\n      },\n    });\n    const [{ lines }] = await response.json();\n    return buildAppList(lines);\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport default getMajibaApps;\n","import React from \"react\";\nfunction Icon({ width = 48, height = 48 }) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={width}\n      height={height}\n      version=\"1.1\"\n      viewBox=\"0 0 16.933 16.933\"\n    >\n      <g transform=\"translate(0 -280.067)\">\n        <circle\n          cx=\"8.467\"\n          cy=\"288.533\"\n          r=\"8.467\"\n          fill=\"#ffc107\"\n          fillOpacity=\"1\"\n          stroke=\"none\"\n          strokeDasharray=\"none\"\n          strokeMiterlimit=\"4\"\n          strokeOpacity=\"0\"\n          strokeWidth=\"0.288\"\n          opacity=\"1\"\n        ></circle>\n        <path\n          fill=\"red\"\n          fillOpacity=\"1\"\n          stroke=\"none\"\n          strokeDasharray=\"none\"\n          strokeMiterlimit=\"4\"\n          strokeOpacity=\"0\"\n          strokeWidth=\"0.291\"\n          d=\"M14.053 285.62a4.98 4.98 0 01-.507 2.196l-9.493-2.196a5 5 0 0110 0z\"\n          opacity=\"1\"\n        ></path>\n        <g transform=\"matrix(1.2079 0 0 1.13889 -23.443 -35.515)\">\n          <path\n            fill=\"#000\"\n            fillOpacity=\"1\"\n            stroke=\"none\"\n            strokeDasharray=\"none\"\n            strokeMiterlimit=\"4\"\n            strokeOpacity=\"0\"\n            strokeWidth=\"0.265\"\n            d=\"M23.116 283.392c1.427 1.137 5.375 1.787 6.645 1.371l-1.043 5.108c-1.198 1.213-5.974.142-6.61-1.471z\"\n            opacity=\"1\"\n          ></path>\n        </g>\n        <g transform=\"matrix(1.20445 .09141 -.08619 1.13562 -6.478 -32.466)\">\n          <g fillOpacity=\"1\" stroke=\"none\">\n            <ellipse\n              cx=\"60.685\"\n              cy=\"276.968\"\n              fill=\"#000\"\n              strokeDasharray=\"none\"\n              strokeMiterlimit=\"4\"\n              strokeOpacity=\"0\"\n              strokeWidth=\"0.265\"\n              opacity=\"1\"\n              rx=\"5.262\"\n              ry=\"1.62\"\n              transform=\"rotate(6.967 38.753 47.892)\"\n            ></ellipse>\n            <ellipse\n              cx=\"61.446\"\n              cy=\"277.179\"\n              fill=\"#483e37\"\n              strokeDasharray=\"none\"\n              strokeMiterlimit=\"4\"\n              strokeOpacity=\"0\"\n              strokeWidth=\"0.162\"\n              opacity=\"1\"\n              rx=\"3.263\"\n              ry=\"0.979\"\n              transform=\"matrix(.993 .11816 -.1245 .99222 6.095 -4.347)\"\n            ></ellipse>\n            <path\n              fill=\"#ffc107\"\n              strokeLinecap=\"butt\"\n              strokeLinejoin=\"miter\"\n              strokeOpacity=\"1\"\n              strokeWidth=\"0.265\"\n              d=\"M30.214 278.358l-.232-3.13 1.15-.093 1.454 1.927 1.163-2.138 1.114-.09.285 3.984c-.286.078-.591.122-1.11.152l-.144-2.014-.935 1.467-.47.038-1.212-1.294.107 1.546c-.387-.078-.779-.221-1.17-.355z\"\n            ></path>\n          </g>\n        </g>\n        <path\n          fill=\"#ffc107\"\n          fillOpacity=\"0\"\n          stroke=\"none\"\n          strokeDasharray=\"none\"\n          strokeMiterlimit=\"4\"\n          strokeOpacity=\"0\"\n          strokeWidth=\"0.095\"\n          d=\"M7.515 296.904a8.581 8.581 0 01-6.264-4.032c-1.407-2.317-1.58-5.337-.449-7.833 1.058-2.334 3.246-4.109 5.83-4.731.806-.194 2.697-.218 3.482-.044 3.512.778 6.108 3.483 6.667 6.948.156.967.066 2.643-.19 3.533-.682 2.382-2.205 4.23-4.392 5.33-1.333.67-3.24 1.007-4.684.829zm3.278-1.965c.217-.113.42-.245.449-.293.045-.074 1.28-5.638 1.281-5.774 0-.026-.69-.05-1.535-.051-2.16-.006-4.1-.41-5.726-1.19-.433-.209-.8-.366-.816-.349-.053.059-1.183 5.477-1.183 5.675 0 .451 1.214 1.288 2.504 1.727 1.128.384 2.042.517 3.355.489 1.094-.024 1.332-.057 1.67-.234zm2.402-6.634c1.756-.202 2.385-.707 1.904-1.529-.238-.405-1.316-1.088-2.373-1.503l-.911-.359-.027-1.045-.026-1.045-.635.002-.635.002-.502.762c-.326.494-.547.744-.631.712-.072-.027-.384-.078-.694-.114-.53-.06-.596-.096-1.113-.62-.545-.55-.555-.555-1.097-.555H5.91v.945l-.543.002c-.65.002-1.69.21-2.094.419-2.137 1.105 2.332 3.456 7.456 3.921 1.18.108 1.565.108 2.467.005z\"\n          opacity=\"1\"\n        ></path>\n        <path\n          fill=\"#ffc107\"\n          fillOpacity=\"0\"\n          stroke=\"none\"\n          strokeDasharray=\"none\"\n          strokeMiterlimit=\"4\"\n          strokeOpacity=\"0\"\n          strokeWidth=\"0.095\"\n          d=\"M7.466 296.905c-1.998-.28-3.934-1.271-5.192-2.66-1.554-1.715-2.307-3.818-2.193-6.13.062-1.262.287-2.16.817-3.26 1.717-3.558 5.788-5.461 9.599-4.487 1.506.386 2.619 1 3.76 2.076 1.711 1.612 2.613 3.72 2.613 6.106 0 4.49-3.459 8.123-7.985 8.385-.467.027-1.106.014-1.42-.03zm3.31-1.988l.472-.234.586-2.646c.323-1.455.6-2.761.615-2.902l.027-.257-1.559-.04c-2.243-.056-4.022-.434-5.66-1.202-.437-.205-.804-.361-.816-.348-.043.052-1.178 5.515-1.178 5.67 0 .257.687.863 1.393 1.229 1.386.718 2.75 1.02 4.467.986 1.04-.02 1.24-.051 1.654-.256zm3.118-6.725c.902-.19 1.37-.537 1.37-1.017 0-.518-1.308-1.448-2.855-2.029l-.594-.223-.027-1.054-.027-1.053-.633.028-.633.027-.488.71c-.269.389-.546.707-.616.706a11.52 11.52 0 01-.705-.078c-.54-.072-.613-.113-1.131-.637-.548-.554-.558-.559-1.1-.559H5.91v.917l-.827.059c-1.544.11-2.487.584-2.342 1.176.245 1 2.719 2.192 5.815 2.802 2.146.422 4.025.501 5.339.225z\"\n          opacity=\"1\"\n        ></path>\n        <path\n          fill=\"#ffc107\"\n          fillOpacity=\"0\"\n          stroke=\"none\"\n          strokeDasharray=\"none\"\n          strokeMiterlimit=\"4\"\n          strokeOpacity=\"0\"\n          strokeWidth=\"0.095\"\n          d=\"M7.466 296.905c-1.998-.28-3.934-1.271-5.192-2.66-1.554-1.715-2.307-3.818-2.193-6.13.062-1.262.287-2.16.817-3.26 1.717-3.558 5.788-5.461 9.599-4.487 1.506.386 2.619 1 3.76 2.076 1.711 1.612 2.613 3.72 2.613 6.106 0 4.49-3.459 8.123-7.985 8.385-.467.027-1.106.014-1.42-.03zm3.31-1.988l.472-.234.586-2.646c.323-1.455.6-2.761.615-2.902l.027-.257-1.559-.04c-2.243-.056-4.022-.434-5.66-1.202-.437-.205-.804-.361-.816-.348-.043.052-1.178 5.515-1.178 5.67 0 .257.687.863 1.393 1.229 1.386.718 2.75 1.02 4.467.986 1.04-.02 1.24-.051 1.654-.256zm3.118-6.725c.902-.19 1.37-.537 1.37-1.017 0-.518-1.308-1.448-2.855-2.029l-.594-.223-.027-1.054-.027-1.053-.633.028-.633.027-.488.71c-.269.389-.546.707-.616.706a11.52 11.52 0 01-.705-.078c-.54-.072-.613-.113-1.131-.637-.548-.554-.558-.559-1.1-.559H5.91v.917l-.827.059c-1.544.11-2.487.584-2.342 1.176.245 1 2.719 2.192 5.815 2.802 2.146.422 4.025.501 5.339.225z\"\n          opacity=\"1\"\n        ></path>\n        <path\n          fill=\"red\"\n          fillOpacity=\"1\"\n          stroke=\"none\"\n          strokeDasharray=\"none\"\n          strokeMiterlimit=\"4\"\n          strokeOpacity=\"0\"\n          strokeWidth=\"0.265\"\n          d=\"M4.479 287.237c2.025 1.046 4.577 1.853 8.026 1.561l-.163.775c-3.008.195-5.89-.173-8.024-1.603z\"\n          opacity=\"1\"\n        ></path>\n      </g>\n    </svg>\n  );\n}\nexport default Icon;\n","import React, { useCallback, useState } from \"react\";\nimport { useRecoilState } from \"recoil\";\nimport { Link } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport FormatListNumbered from \"@material-ui/icons/FormatListNumbered\";\nimport VpnKey from \"@material-ui/icons/VpnKey\";\nimport Home from \"@material-ui/icons/Home\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { userState } from \"../state\";\nimport { keycloak } from \"../commons\";\nimport MajibaIcon from \"./majiba.icon\";\n\nconst useStyles = makeStyles((theme) => {\n  return {\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      flexGrow: 1,\n    },\n  };\n});\n\nexport default function ButtonAppBar() {\n  const classes = useStyles();\n  const [user] = useRecoilState(userState);\n  const { authenticated } = user;\n  const [menu, setMenu] = useState(false);\n\n  const onLoginCallback = useCallback(\n    function () {\n      if (!authenticated) {\n        keycloak.login({\n          redirectUri: `${window.location.origin}/${window.location.pathname}`,\n        });\n      } else {\n        keycloak.logout({\n          redirectUri: `${window.location.origin}/`,\n        });\n      }\n    },\n    [authenticated]\n  );\n\n  return (\n    <AppBar position=\"static\">\n      <Toolbar>\n        <IconButton\n          edge=\"start\"\n          className={classes.menuButton}\n          color=\"inherit\"\n          aria-label=\"menu\"\n          onClick={() => setMenu(true)}\n        >\n          <MajibaIcon />\n        </IconButton>\n        <Typography variant=\"h6\" className={classes.title}>\n          Majiba api - renouvellement de jeton d'accès.\n        </Typography>\n        <Button onClick={onLoginCallback} color=\"inherit\">\n          {authenticated ? \"logout\" : \"login\"}\n        </Button>\n      </Toolbar>\n      <Drawer anchor=\"left\" open={menu} onClose={() => setMenu(false)}>\n        <ListItem\n          button\n          component={Link}\n          to=\"/majiba-ui/accueil\"\n          onClick={() => setMenu(false)}\n        >\n          <ListItemIcon>\n            <Home />\n          </ListItemIcon>\n          <ListItemText primary=\"Accueil\" />\n        </ListItem>\n        <ListItem\n          button\n          component={Link}\n          to=\"/majiba-ui/display-apps\"\n          onClick={() => setMenu(false)}\n        >\n          <ListItemIcon>\n            <FormatListNumbered />\n          </ListItemIcon>\n          <ListItemText primary=\"Consulter la liste des applications\" />\n        </ListItem>\n        <ListItem\n          button\n          component={Link}\n          to=\"/majiba-ui/renew-token\"\n          onClick={() => setMenu(false)}\n        >\n          <ListItemIcon>\n            <VpnKey />\n          </ListItemIcon>\n          <ListItemText primary=\"Renouveler un jeton\" />\n        </ListItem>\n      </Drawer>\n    </AppBar>\n  );\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nfunction Waiting({ status }) {\n  if (!status) {\n    return null;\n  }\n  return (\n    <div className={classnames(\"waiting\")}>\n      <div className=\"circular\">\n        <CircularProgress color=\"secondary\" />\n      </div>\n    </div>\n  );\n}\n\nexport default Waiting;\n","import React from \"react\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nfunction Notification({ status }) {\n  switch (status) {\n    case 666:\n      return (\n        <Alert severity=\"success\" className=\"notification\">\n          Le Diable s'en est mêlé !\n        </Alert>\n      );\n    case 200:\n      return (\n        <Alert severity=\"success\" className=\"notification\">\n          Votre jeton est renouvelé !\n        </Alert>\n      );\n    case 400:\n      return (\n        <Alert severity=\"error\" className=\"notification\">\n          Cette application n'éxiste pas !\n        </Alert>\n      );\n    case 403:\n    case 401:\n      return (\n        <Alert severity=\"error\" className=\"notification\">\n          Vous n'avez pas les droits nécessaires !\n        </Alert>\n      );\n\n    default:\n      return null;\n  }\n}\n\nexport default Notification;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nfunction Confirm({ name, open, onConfirm, onCancel }) {\n  return (\n    <Dialog open={open} onClose={onCancel} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">\n        Renouveler le token Majiba de l'application {name}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          En renouvelant le token de l'application, vous révoquerez\n          immédiatement le précédent. Voulez-vous continuer ?\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button variant=\"contained\" onClick={onCancel} color=\"primary\">\n          Annuler\n        </Button>\n        <Button variant=\"contained\" onClick={onConfirm} color=\"secondary\">\n          Renouveler\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default Confirm;\n","import removeAccents from 'remove-accents';\n\nexport const preparePrefix = (prefix) =>\n\ttypeof prefix === 'string'\n\t\t? removeAccents(prefix.toLowerCase()).replace(/[- ']/g, '')\n\t\t: prefix;\n\nexport const lettersMatching = (label, prefix = '') => {\n\tconst pref = prefix.split('');\n\tlet pos = -1;\n\tconst clean = preparePrefix(label);\n\treturn clean.split('').reduce((a, c, idx) => {\n\t\tif (pos < pref.length && pref[pos + 1] === c) {\n\t\t\tpos++;\n\t\t\treturn [...a, c];\n\t\t}\n\t\treturn a;\n\t}, []);\n};\n\nexport const match = (label, prefix) => {\n\tconst pref = prefix.split('');\n\tlet pos = -1;\n\tconst clean = preparePrefix(label);\n\treturn (\n\t\tclean.split('').reduce((a, c, idx) => {\n\t\t\tif (pos < pref.length && pref[pos + 1] === c) {\n\t\t\t\tpos++;\n\t\t\t\treturn a + 1;\n\t\t\t}\n\t\t\treturn a / (idx * 0.0001 + 1);\n\t\t}, 0) / prefix.length\n\t);\n};\n\n/** */\nexport const filterOption = (options, prefix) => {\n\tif (!prefix || prefix.length === 0) {\n\t\treturn options;\n\t}\n\n\treturn options\n\t\t.reduce((acc, o) => {\n\t\t\tconst { label, search } = o;\n\t\t\tconst how = match(search || label, prefix);\n\t\t\treturn how >= 0.6\n\t\t\t\t? [{ o, how }, ...acc].sort((a, b) => a.how <= b.how)\n\t\t\t\t: acc;\n\t\t}, [])\n\t\t.map(({ o }) => o);\n};\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { preparePrefix } from \"./prefix-tools\";\n\nfunction getSuggestions(list, prefix) {\n  return list\n    .reduce(function (a, value) {\n      if (value.startsWith(prefix) && a.indexOf(value) === -1) {\n        return [...a, value];\n      }\n      return a;\n    }, [])\n    .sort(function (a, b) {\n      if (a.length < b.length) {\n        return -1;\n      }\n      return 1;\n    });\n}\n\nfunction Item({ label, onClick, focused }) {\n  return (\n    <MenuItem\n      onClick={(e) => {\n        e.stopPropagation();\n        onClick(label);\n      }}\n      selected={focused}\n    >\n      {label}\n    </MenuItem>\n  );\n}\n\nfunction SuggestionMenu({ items, onClick, focused }) {\n  if (items.length) {\n    return (\n      <Paper elevation={1} component=\"div\" className=\"menu-items\">\n        <MenuList>\n          {items.map(function (label, i) {\n            return (\n              <Item\n                key={label}\n                label={label}\n                onClick={onClick}\n                focused={focused === i}\n              />\n            );\n          })}\n        </MenuList>\n      </Paper>\n    );\n  }\n  return null;\n}\n\nfunction Suggester({ list = [], onChange, className, onSubmit }) {\n  const [suggestions, setSuggestions] = useState([]);\n  const [focused, setFocused] = useState(0);\n  const [prefix, setPrefix] = useState(\"\");\n\n  const onChangeCallback = useCallback(\n    function (e) {\n      setPrefix(e.target.value);\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n\n  const onClickCallback = useCallback(\n    function (name) {\n      onSubmit(name);\n    },\n    [onSubmit]\n  );\n\n  useEffect(\n    function () {\n      if (prefix.length) {\n        const prepared = preparePrefix(prefix);\n        setSuggestions(getSuggestions(list, prepared));\n      } else {\n        setSuggestions([]);\n      }\n    },\n    [prefix, list]\n  );\n\n  const onKeyDown = useCallback(\n    function (e) {\n      if (e.key === \"ArrowDown\") {\n        setFocused(Math.min(focused + 1, suggestions.length - 1));\n      } else if (e.key === \"ArrowUp\") {\n        setFocused(Math.max(focused - 1, 0));\n      } else if (e.key === \"Enter\") {\n        if (suggestions.length) {\n          onSubmit(suggestions[focused]);\n        }\n      }\n    },\n    [focused, suggestions, onSubmit]\n  );\n\n  return (\n    <>\n      <TextField\n        label=\"Nom de l'application\"\n        variant=\"outlined\"\n        onChange={onChangeCallback}\n        className={className}\n        onKeyDown={onKeyDown}\n      />\n      <SuggestionMenu\n        items={suggestions}\n        onClick={onClickCallback}\n        focused={focused}\n      />\n    </>\n  );\n}\n\nexport default Suggester;\n","import React from \"react\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\nimport Assignment from \"@material-ui/icons/Assignment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { writeText } from \"clipboard-polyfill/text\";\n\nfunction Token({ value }) {\n  if (!value) {\n    return null;\n  }\n  return (\n    <FormControl fullWidth variant=\"outlined\" className=\"token\">\n      <InputLabel htmlFor=\"outlined-adornment-amount\">Token</InputLabel>\n      <OutlinedInput\n        id=\"token\"\n        label=\"Token\"\n        type=\"text\"\n        disabled={true}\n        variant=\"outlined\"\n        value={value}\n        endAdornment={\n          <InputAdornment position=\"end\">\n            <IconButton\n              aria-label=\"copy\"\n              title=\"copy\"\n              onClick={function () {\n                writeText(value);\n              }}\n            >\n              <Assignment />\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  );\n}\n\nexport default Token;\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Waiting from \"../waiting\";\nimport { userState, majibaState } from \"../../state\";\nimport { axiosWithAuth, getMajibaUri } from \"../../commons\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\nimport Notification from \"./notification\";\nimport Confirm from \"./confirm\";\nimport Suggester from \"./suggester\";\nimport Token from \"./token\";\nimport \"./formulaire.scss\";\n\nfunction createUri(name) {\n  return `${getMajibaUri()}/application/${name.replace(/\\s+/g, \"\")}/token`;\n}\n\nfunction isEnabled(name) {\n  return name.length;\n}\n\nfunction PleaseLogin() {\n  return (\n    <Typography component=\"div\" variant=\"body1\">\n      Vous n'êtes pas encore authentifié.\n    </Typography>\n  );\n}\n\nfunction Formulaire() {\n  const [{ token, authenticated }] = useRecoilState(userState);\n  const [confirm, setConfirm] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [wait, setWait] = useState(false);\n  const [status, setStatus] = useState(undefined);\n  const [majibaToken, setMajibaToken] = useState(undefined);\n  const [suggestions, setSuggestions] = useState(undefined);\n  const apps = useRecoilValue(majibaState);\n\n  const onChangeName = useCallback(function (name) {\n    setName(name);\n  }, []);\n\n  useEffect(\n    function () {\n      if (apps && apps.length) {\n        setSuggestions(apps.map(({ name }) => name));\n      }\n    },\n    [apps]\n  );\n\n  const onMenuSubmit = useCallback(function (n) {\n    setName(n);\n    setConfirm(true);\n  }, []);\n\n  const onSubmit = useCallback(\n    function (e) {\n      e.stopPropagation();\n      const uri = createUri(name);\n      setWait(true);\n      setConfirm(false);\n      setStatus(undefined);\n      setMajibaToken(undefined);\n      axiosWithAuth(token)\n        .get(uri)\n        .then(function ({ data }) {\n          const { token } = data;\n          setMajibaToken(token);\n          setWait(false);\n          setStatus(200);\n        })\n        .catch(function (e) {\n          const { response } = e;\n          setWait(false);\n          if (response) {\n            const { status } = response;\n            setStatus(status);\n          } else {\n            setStatus(666);\n          }\n        });\n    },\n    [name, token]\n  );\n\n  if (!authenticated) {\n    return <PleaseLogin />;\n  }\n  return (\n    <Paper elevation={2}>\n      <Waiting status={wait} />\n      <Typography component=\"div\" variant=\"h4\">\n        Demande de renouvellement de jeton.\n      </Typography>\n\n      {majibaToken ? (\n        <form className=\"majiba-demande-token\" noValidate autoComplete=\"off\">\n          <Typography component=\"p\" variant=\"body1\" className=\"warning\">\n            N'oubliez pas de copier votre jeton dans le presse papier, à l'aide\n            du bouton dans le champ texte avant de quitter cette page.\n          </Typography>\n          <Token value={majibaToken} />\n        </form>\n      ) : (\n        <form className=\"majiba-demande-token\" noValidate autoComplete=\"off\">\n          <WarningIcon style={{ fontSize: 40, color: \"red\" }} />\n          <Typography component=\"p\" variant=\"body1\" className=\"warning\">\n            En renouvelant le jeton de votre application auprès de l'API MAJIBA,\n            vous révoquez automatiquement le précédant, s'il existe. Votre\n            procédure de déploiement automatique ne fonctionnera alors\n            correctement que lorsque vous lui aurez adjoint le nouveau jeton.\n          </Typography>\n\n          <Suggester\n            list={suggestions}\n            onChange={onChangeName}\n            onSubmit={onMenuSubmit}\n            className=\"applications-suggester\"\n          />\n\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            className=\"form-button\"\n            disabled={!isEnabled(name)}\n            onClick={() => setConfirm(true)}\n          >\n            Soumettre\n          </Button>\n          <Confirm\n            name={name}\n            open={confirm}\n            onConfirm={onSubmit}\n            onSelect={onSubmit}\n            onCancel={() => setConfirm(false)}\n          />\n          <Notification status={status} />\n        </form>\n      )}\n    </Paper>\n  );\n}\n\nexport default Formulaire;\n","import React, { useCallback, useState, useEffect, useRef } from \"react\";\nimport { useRecoilState } from \"recoil\";\nimport { ReactLargeTable } from \"react-scrollable-div\";\nimport classnames from \"classnames\";\nimport { majibaState } from \"../../state\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Subject from \"@material-ui/icons/Subject\";\nimport Waiting from \"../waiting\";\nimport { getMajibaApps } from \"../../commons\";\nimport \"./simple-theme.scss\";\n\nfunction Modules({ list, anchor }) {\n  const [display, setDisplay] = useState(false);\n\n  if (list.length) {\n    return !display ? (\n      <IconButton\n        size=\"small\"\n        aria-label=\"delete\"\n        color=\"primary\"\n        onClick={() => setDisplay(!display)}\n      >\n        <Subject />\n      </IconButton>\n    ) : (\n      <Menu open={display} onClose={() => setDisplay(false)} anchorEl={anchor}>\n        {list.map(function (label) {\n          return <MenuItem key={label}>{label}</MenuItem>;\n        })}\n      </Menu>\n    );\n  }\n  return null;\n}\n\nfunction ContentCell({ cell }) {\n  const anchorEl = useRef(null);\n  const { value, key } = cell;\n  if (key === \"modules\") {\n    return (\n      <span className={classnames(\"simple-theme-cell\", key)} ref={anchorEl}>\n        <Modules list={value} anchor={anchorEl.current} />\n      </span>\n    );\n  }\n  return <span className={classnames(\"simple-theme-cell\", key)}>{value}</span>;\n}\n\nfunction prepare(apps) {\n  const rows = apps.map(function (e, i) {\n    const values = Object.entries(e).reduce(function (o, [key, value]) {\n      return { ...o, [key]: { value, key } };\n    }, {});\n    return { ...values, index: { value: i + 1 }, __height: 40 };\n  });\n\n  return {\n    header: [\n      { label: \"Index\", path: \"index\", __width: 80, resizable: true },\n      { label: \"Nom\", path: \"name\", __width: 250, resizable: true },\n      { label: \"Modules\", path: \"modules\", __width: 100, resizable: true },\n      { label: \"Type\", path: \"kind\", __width: 300, resizable: true },\n      { label: \"Groupe AD\", path: \"ad\", __width: 300, resizable: true },\n    ],\n    rows,\n  };\n}\n\nfunction MajibaApps() {\n  const [wait, setWait] = useState(false);\n  const [tableData, setTableData] = useState(undefined);\n  const [apps, setApps] = useRecoilState(majibaState);\n  const refresh = useCallback(\n    function () {\n      setWait(true);\n      getMajibaApps()\n        .then(function (apps) {\n          setWait(false);\n          setApps(apps);\n        })\n        .catch(function () {\n          setWait(false);\n        });\n    },\n    [setApps]\n  );\n\n  useEffect(\n    function () {\n      if (apps) {\n        setTableData(prepare(apps));\n      }\n    },\n    [apps]\n  );\n\n  return (\n    <Paper elevation={2}>\n      <Waiting status={wait} />\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        className=\"form-button\"\n        onClick={refresh}\n      >\n        {apps ? \"Rafraichir la liste\" : \"Charger la liste\"}\n      </Button>\n      {tableData && tableData.rows ? (\n        <div className=\"table-apps-container\">\n          <ReactLargeTable\n            data={tableData}\n            headerHeight={50}\n            className=\"simple-theme\"\n            cellRenderer={ContentCell}\n          />\n        </div>\n      ) : null}\n    </Paper>\n  );\n}\n\nexport default MajibaApps;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport { useRecoilState, useSetRecoilState } from \"recoil\";\nimport { userState, majibaState } from \"../state\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Container from \"@material-ui/core/Container\";\nimport Accueil from \"./accueil\";\nimport theme from \"./theme\";\nimport AppBar from \"./app-bar\";\nimport RefreshToken from \"./refresh-token\";\nimport { getMajibaApps } from \"../commons\";\nimport MajibaApps from \"./majiba-apps\";\nimport { keycloak } from \"../commons\";\nimport \"./application.scss\";\n\nfunction Application() {\n  const [user, setUserState] = useRecoilState(userState);\n  const setApps = useSetRecoilState(majibaState);\n  const [init, setInit] = useState(false);\n\n  useEffect(\n    function () {\n      if (!init) {\n        setInit(true);\n        getMajibaApps()\n          .then(function (apps) {\n            setApps(apps);\n          })\n          .catch(function () {\n            // TODO error fallback\n          });\n      }\n    },\n    [init, setApps]\n  );\n\n  useEffect(\n    function () {\n      const { authenticated } = user;\n      if (!authenticated) {\n        keycloak\n          .init()\n          .success(function (is) {\n            if (is) {\n              setUserState({\n                ...user,\n                token: keycloak.token,\n                givenName: keycloak.tokenParsed.given_name,\n                authenticated: true,\n              });\n            }\n          })\n          .error(function (e) {\n            console.log(e);\n          });\n      }\n    },\n    [setUserState, user]\n  );\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <AppBar />\n        <Container role=\"main\" component=\"main\" fixed className=\"container\">\n          <Switch>\n            <Route exact path=\"/majiba-ui/accueil\" component={Accueil} />\n            <Route\n              exact\n              path=\"/majiba-ui/renew-token\"\n              component={RefreshToken}\n            />\n            <Route\n              exact\n              path=\"/majiba-ui/display-apps\"\n              component={MajibaApps}\n            />\n            <Route\n              path=\"/\"\n              component={() => <Redirect to=\"/majiba-ui/accueil\" />}\n            />\n          </Switch>\n        </Container>\n      </Router>\n    </ThemeProvider>\n  );\n}\n\nexport default Application;\n","import React from \"react\";\nimport ReactDom from \"react-dom\";\nimport { RecoilRoot } from \"recoil\";\nimport Application from \"./components\";\n\nReactDom.render(\n  <RecoilRoot>\n    <Application />\n  </RecoilRoot>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}